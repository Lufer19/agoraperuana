<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Tests de Filosofía - Ágora Peruana</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <h1>Tests de Filosofía</h1>
    <nav>
      <a href="index.html">Inicio</a>
      <a href="articulos.html">Artículos</a>
      <a href="definiciones.html">Definiciones</a>
      <a href="tests.html">Tests</a>
      <a href="juegos.html">Juegos</a>
      <a href="podcast.html">Podcast</a>
      <a href="videos.html">Videos</a>
      <a href="enlaces.html">Explorar</a>
    </nav>
  </header>

  <main>
    <h2>Responde y aprende</h2>
    <div id="test"></div>
    <button onclick="mostrarResultado()">Ver resultado</button>
    <p id="resultado"></p>
  </main>

<script>
  let preguntas = [];

  fetch('content/tests.json')
    .then(r => r.json())
    .then(data => {
      preguntas = data;
      const div = document.getElementById('test');
      div.innerHTML = preguntas.map((p,i) => `
        <div>
          <p>${p.pregunta}</p>
          ${p.opciones.map((op,j) => `
            <label>
              <input type="radio" name="q${i}" value="${j}">
              ${op}
            </label><br>
          `).join('')}
          <p id="exp${i}" style="color:blue"></p>
        </div>
      `).join('');
    });

  function mostrarResultado() {
    let correctas = 0;
    preguntas.forEach((p,i) => {
      const marcado = document.querySelector(`input[name="q${i}"]:checked`);
      if (marcado) {
        if (parseInt(marcado.value) === p.correcta) {
          correctas++;
          document.getElementById('exp'+i).innerText = "✅ Correcto: " + p.explicacion;
        } else {
          document.getElementById('exp'+i).innerText = "❌ Incorrecto. " + p.explicacion;
        }
      }
    });
    document.getElementById('resultado').innerText =
      `Tuviste ${correctas} de ${preguntas.length} correctas.`;
  }
</script>

</body>
</html>
